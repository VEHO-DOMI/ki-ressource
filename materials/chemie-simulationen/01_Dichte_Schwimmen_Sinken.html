<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dichte - Schwimmen und Sinken</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 12px;
            color: #fff;
        }
        .header {
            text-align: center;
            margin-bottom: 12px;
        }
        .header h1 {
            font-size: 1.4em;
            color: #4fc3f7;
            margin-bottom: 4px;
        }
        .header p {
            color: #90a4ae;
            font-size: 0.8em;
        }
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 12px;
            height: calc(100vh - 80px);
            min-height: 500px;
        }
        @media (max-width: 900px) {
            .main-layout {
                grid-template-columns: 1fr;
                height: auto;
            }
        }
        .canvas-container {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        canvas {
            display: block;
            flex: 1;
            background: linear-gradient(180deg, #87CEEB 0%, #1E90FF 50%, #0d1b2a 50%, #1b263b 100%);
            border-radius: 8px;
            border: 2px solid #4fc3f7;
        }
        .control-panel {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 12px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .control-section {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 8px;
        }
        .control-section h3 {
            color: #4fc3f7;
            font-size: 0.85em;
            margin-bottom: 6px;
        }
        .object-btn {
            padding: 6px 10px;
            font-size: 0.75em;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            width: 100%;
            margin-bottom: 4px;
        }
        .object-btn:last-child { margin-bottom: 0; }
        .object-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }
        .object-btn.wood { background: linear-gradient(135deg, #8B4513, #D2691E); color: white; }
        .object-btn.ice { background: linear-gradient(135deg, #E0FFFF, #B0E0E6); color: #333; }
        .object-btn.iron { background: linear-gradient(135deg, #708090, #2F4F4F); color: white; }
        .object-btn.oil { background: linear-gradient(135deg, #FFD700, #FFA500); color: #333; }
        .object-btn.stone { background: linear-gradient(135deg, #696969, #A9A9A9); color: white; }
        .object-btn.cork { background: linear-gradient(135deg, #DEB887, #F5DEB3); color: #333; }
        .object-btn.reset { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; }
        .slider-section {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .slider-section label {
            font-size: 0.8em;
            color: #90a4ae;
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #4fc3f7, #e91e63);
            border-radius: 3px;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
        }
        input[type="range"]::-moz-range-thumb {
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        .density-display {
            font-size: 0.8em;
            font-weight: bold;
            color: #4fc3f7;
        }
        .legend {
            font-size: 0.7em;
            color: #90a4ae;
            line-height: 1.4;
        }
        .formula {
            background: rgba(0,0,0,0.3);
            padding: 6px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 0.75em;
            color: #4fc3f7;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚öóÔ∏è Dichte ‚Äì Schwimmen und Sinken</h1>
        <p>3. Klasse Chemie</p>
    </div>

    <div class="main-layout">
        <div class="canvas-container">
            <canvas id="densityCanvas" width="800" height="450"></canvas>
        </div>

        <div class="control-panel">
            <div class="control-section">
                <h3>üß¨ Objekte</h3>
                <button class="object-btn wood" onclick="addObject('wood')">ü™µ Holz</button>
                <button class="object-btn ice" onclick="addObject('ice')">üßä Eis</button>
                <button class="object-btn cork" onclick="addObject('cork')">üçæ Kork</button>
                <button class="object-btn oil" onclick="addObject('oil')">üõ¢Ô∏è √ñl</button>
                <button class="object-btn stone" onclick="addObject('stone')">ü™® Stein</button>
                <button class="object-btn iron" onclick="addObject('iron')">‚öôÔ∏è Eisen</button>
                <button class="object-btn reset" onclick="resetSimulation()">üîÑ Reset</button>
            </div>

            <div class="control-section slider-section">
                <h3>üß™ Fl√ºssigkeit</h3>
                <label for="liquidDensity">Dichte anpassen:</label>
                <input type="range" id="liquidDensity" min="0.8" max="1.5" step="0.01" value="1.0">
                <span class="density-display" id="densityDisplay">œÅ = 1.00 g/cm¬≥</span>
            </div>

            <div class="control-section">
                <h3>üìö Dichtetabelle</h3>
                <div class="legend">
                    <div>ü™µ Holz: 0.6</div>
                    <div>üßä Eis: 0.92</div>
                    <div>üçæ Kork: 0.24</div>
                    <div>üõ¢Ô∏è √ñl: 0.85</div>
                    <div>ü™® Stein: 2.5</div>
                    <div>‚öôÔ∏è Eisen: 7.87</div>
                </div>
            </div>

            <div class="control-section">
                <div class="formula">œÅ = m / V</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('densityCanvas');
        const ctx = canvas.getContext('2d');
        const liquidDensitySlider = document.getElementById('liquidDensity');
        const densityDisplay = document.getElementById('densityDisplay');

        let liquidDensity = 1.0;
        const waterLevel = canvas.height * 0.5;
        let objects = [];

        const materials = {
            wood: { density: 0.6, color: '#8B4513', emoji: 'ü™µ', name: 'Holz' },
            ice: { density: 0.92, color: '#B0E0E6', emoji: 'üßä', name: 'Eis' },
            cork: { density: 0.24, color: '#DEB887', emoji: 'üçæ', name: 'Kork' },
            oil: { density: 0.85, color: '#FFD700', emoji: 'üõ¢Ô∏è', name: '√ñl' },
            stone: { density: 2.5, color: '#696969', emoji: 'ü™®', name: 'Stein' },
            iron: { density: 7.87, color: '#2F4F4F', emoji: '‚öôÔ∏è', name: 'Eisen' }
        };

        class FloatingObject {
            constructor(type, x) {
                this.type = type;
                this.x = x;
                this.y = 50;
                this.vy = 0;
                this.size = 40;
                this.material = materials[type];
            }

            getTargetY() {
                const ratio = this.material.density / liquidDensity;
                if (ratio >= 1) {
                    return canvas.height - this.size - 10;
                } else {
                    const submergedFraction = ratio;
                    return waterLevel - this.size * (1 - submergedFraction);
                }
            }

            update() {
                const targetY = this.getTargetY();
                const dy = targetY - this.y;
                this.vy += dy * 0.02;
                this.vy *= 0.92;
                this.y += this.vy;

                // Horizontal drift
                this.x += Math.sin(Date.now() / 1000 + this.x) * 0.3;
                if (this.x < this.size) this.x = this.size;
                if (this.x > canvas.width - this.size) this.x = canvas.width - this.size;
            }

            draw() {
                ctx.save();
                ctx.textAlign = 'center';

                const cx = this.x;
                const cy = this.y + this.size/2;
                const s = this.size;

                // Draw shape based on material type
                switch(this.type) {
                    case 'wood':
                        this.drawWood(cx, cy, s);
                        break;
                    case 'ice':
                        this.drawIce(cx, cy, s);
                        break;
                    case 'cork':
                        this.drawCork(cx, cy, s);
                        break;
                    case 'oil':
                        this.drawOil(cx, cy, s);
                        break;
                    case 'stone':
                        this.drawStone(cx, cy, s);
                        break;
                    case 'iron':
                        this.drawIron(cx, cy, s);
                        break;
                }

                // Label
                ctx.fillStyle = 'white';
                ctx.font = 'bold 12px Segoe UI';
                ctx.fillText(this.material.name, this.x, this.y + this.size + 20);
                ctx.font = '10px Segoe UI';
                ctx.fillStyle = '#90a4ae';
                ctx.fillText(`œÅ = ${this.material.density} g/cm¬≥`, this.x, this.y + this.size + 35);

                ctx.restore();
            }

            // Holz - Holzscheit/Baumstamm
            drawWood(cx, cy, s) {
                const w = s * 1.4;
                const h = s * 0.7;

                // Shadow
                ctx.fillStyle = 'rgba(0,0,0,0.3)';
                ctx.fillRect(cx - w/2 + 4, cy - h/2 + 4, w, h);

                // Main body
                const grad = ctx.createLinearGradient(cx - w/2, cy, cx + w/2, cy);
                grad.addColorStop(0, '#6B4423');
                grad.addColorStop(0.3, '#8B5A2B');
                grad.addColorStop(0.5, '#A0522D');
                grad.addColorStop(0.7, '#8B5A2B');
                grad.addColorStop(1, '#6B4423');
                ctx.fillStyle = grad;
                ctx.fillRect(cx - w/2, cy - h/2, w, h);

                // Wood grain lines
                ctx.strokeStyle = 'rgba(139, 69, 19, 0.6)';
                ctx.lineWidth = 1;
                for (let i = 0; i < 5; i++) {
                    const yPos = cy - h/2 + (i + 1) * h/6;
                    ctx.beginPath();
                    ctx.moveTo(cx - w/2 + 5, yPos);
                    ctx.bezierCurveTo(cx - w/4, yPos - 3, cx + w/4, yPos + 3, cx + w/2 - 5, yPos);
                    ctx.stroke();
                }

                // End grain circles (log ends)
                ctx.fillStyle = '#D2691E';
                ctx.beginPath();
                ctx.ellipse(cx - w/2, cy, h/6, h/2, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#8B4513';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Tree rings on end
                ctx.strokeStyle = 'rgba(139, 69, 19, 0.5)';
                ctx.lineWidth = 1;
                for (let r = 5; r < h/2; r += 6) {
                    ctx.beginPath();
                    ctx.ellipse(cx - w/2, cy, r * 0.3, r, 0, 0, Math.PI * 2);
                    ctx.stroke();
                }
            }

            // Eis - Eisw√ºrfel
            drawIce(cx, cy, s) {
                const size = s * 0.8;

                // Shadow
                ctx.fillStyle = 'rgba(0,0,0,0.2)';
                ctx.fillRect(cx - size/2 + 4, cy - size/2 + 4, size, size);

                // Main cube (slightly transparent)
                const grad = ctx.createLinearGradient(cx - size/2, cy - size/2, cx + size/2, cy + size/2);
                grad.addColorStop(0, 'rgba(240, 255, 255, 0.9)');
                grad.addColorStop(0.5, 'rgba(200, 240, 255, 0.8)');
                grad.addColorStop(1, 'rgba(176, 224, 230, 0.9)');
                ctx.fillStyle = grad;
                ctx.fillRect(cx - size/2, cy - size/2, size, size);

                // Ice cracks
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(cx - size/4, cy - size/2);
                ctx.lineTo(cx, cy);
                ctx.lineTo(cx + size/3, cy + size/2);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(cx + size/2, cy - size/4);
                ctx.lineTo(cx, cy + size/6);
                ctx.stroke();

                // Shine/reflection
                ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                ctx.fillRect(cx - size/2 + 5, cy - size/2 + 5, size/4, size/6);

                // Border
                ctx.strokeStyle = 'rgba(150, 200, 220, 0.8)';
                ctx.lineWidth = 2;
                ctx.strokeRect(cx - size/2, cy - size/2, size, size);
            }

            // Kork - Weinkorken
            drawCork(cx, cy, s) {
                const w = s * 0.5;
                const h = s * 1.0;

                // Shadow
                ctx.fillStyle = 'rgba(0,0,0,0.3)';
                ctx.beginPath();
                ctx.ellipse(cx + 3, cy + h/2 + 3, w/2, w/4, 0, 0, Math.PI * 2);
                ctx.fill();

                // Cork body (cylinder)
                const grad = ctx.createLinearGradient(cx - w/2, cy, cx + w/2, cy);
                grad.addColorStop(0, '#C4A574');
                grad.addColorStop(0.3, '#DEB887');
                grad.addColorStop(0.7, '#D2B48C');
                grad.addColorStop(1, '#C4A574');
                ctx.fillStyle = grad;
                ctx.fillRect(cx - w/2, cy - h/2, w, h);

                // Top ellipse
                ctx.fillStyle = '#E8D4B8';
                ctx.beginPath();
                ctx.ellipse(cx, cy - h/2, w/2, w/4, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#A08060';
                ctx.lineWidth = 1;
                ctx.stroke();

                // Cork texture dots
                ctx.fillStyle = 'rgba(139, 90, 43, 0.4)';
                for (let i = 0; i < 12; i++) {
                    const px = cx - w/3 + Math.random() * w * 0.66;
                    const py = cy - h/3 + Math.random() * h * 0.66;
                    ctx.beginPath();
                    ctx.arc(px, py, 2, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Side edges
                ctx.strokeStyle = '#A08060';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(cx - w/2, cy - h/2);
                ctx.lineTo(cx - w/2, cy + h/2);
                ctx.moveTo(cx + w/2, cy - h/2);
                ctx.lineTo(cx + w/2, cy + h/2);
                ctx.stroke();
            }

            // √ñl - √ñltropfen
            drawOil(cx, cy, s) {
                const r = s * 0.45;

                // Shadow
                ctx.fillStyle = 'rgba(0,0,0,0.3)';
                ctx.beginPath();
                ctx.ellipse(cx + 3, cy + 3, r, r * 0.8, 0, 0, Math.PI * 2);
                ctx.fill();

                // Droplet shape
                ctx.beginPath();
                ctx.moveTo(cx, cy - r * 1.2);
                ctx.bezierCurveTo(cx + r * 0.5, cy - r * 0.5, cx + r, cy, cx + r, cy + r * 0.3);
                ctx.bezierCurveTo(cx + r, cy + r, cx + r * 0.5, cy + r, cx, cy + r);
                ctx.bezierCurveTo(cx - r * 0.5, cy + r, cx - r, cy + r, cx - r, cy + r * 0.3);
                ctx.bezierCurveTo(cx - r, cy, cx - r * 0.5, cy - r * 0.5, cx, cy - r * 1.2);
                ctx.closePath();

                const grad = ctx.createRadialGradient(cx - r/3, cy - r/3, 0, cx, cy, r * 1.2);
                grad.addColorStop(0, '#FFE44D');
                grad.addColorStop(0.5, '#FFD700');
                grad.addColorStop(1, '#CC9900');
                ctx.fillStyle = grad;
                ctx.fill();

                // Shine
                ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.beginPath();
                ctx.ellipse(cx - r/3, cy - r/4, r/4, r/6, -0.5, 0, Math.PI * 2);
                ctx.fill();
            }

            // Stein - Unregelm√§√üiger Stein
            drawStone(cx, cy, s) {
                const r = s * 0.5;

                // Shadow
                ctx.fillStyle = 'rgba(0,0,0,0.4)';
                ctx.beginPath();
                ctx.ellipse(cx + 4, cy + r + 4, r * 0.9, r * 0.3, 0, 0, Math.PI * 2);
                ctx.fill();

                // Irregular stone shape
                ctx.beginPath();
                ctx.moveTo(cx - r * 0.8, cy - r * 0.2);
                ctx.lineTo(cx - r * 0.5, cy - r * 0.7);
                ctx.lineTo(cx + r * 0.1, cy - r * 0.8);
                ctx.lineTo(cx + r * 0.7, cy - r * 0.5);
                ctx.lineTo(cx + r * 0.9, cy + r * 0.1);
                ctx.lineTo(cx + r * 0.6, cy + r * 0.7);
                ctx.lineTo(cx - r * 0.2, cy + r * 0.8);
                ctx.lineTo(cx - r * 0.8, cy + r * 0.4);
                ctx.closePath();

                const grad = ctx.createLinearGradient(cx - r, cy - r, cx + r, cy + r);
                grad.addColorStop(0, '#909090');
                grad.addColorStop(0.3, '#707070');
                grad.addColorStop(0.7, '#606060');
                grad.addColorStop(1, '#505050');
                ctx.fillStyle = grad;
                ctx.fill();
                ctx.strokeStyle = '#404040';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Stone texture/speckles
                ctx.fillStyle = 'rgba(100, 100, 100, 0.5)';
                ctx.beginPath();
                ctx.arc(cx - r * 0.3, cy - r * 0.2, 4, 0, Math.PI * 2);
                ctx.arc(cx + r * 0.2, cy + r * 0.3, 3, 0, Math.PI * 2);
                ctx.arc(cx + r * 0.4, cy - r * 0.3, 2, 0, Math.PI * 2);
                ctx.fill();
            }

            // Eisen - Metallgewicht/Block
            drawIron(cx, cy, s) {
                const w = s * 0.9;
                const h = s * 0.7;

                // Shadow
                ctx.fillStyle = 'rgba(0,0,0,0.5)';
                ctx.fillRect(cx - w/2 + 5, cy - h/2 + 5, w, h);

                // Main block with metallic gradient
                const grad = ctx.createLinearGradient(cx - w/2, cy - h/2, cx + w/2, cy + h/2);
                grad.addColorStop(0, '#708090');
                grad.addColorStop(0.2, '#A8A8A8');
                grad.addColorStop(0.4, '#888888');
                grad.addColorStop(0.6, '#686868');
                grad.addColorStop(0.8, '#808080');
                grad.addColorStop(1, '#505050');
                ctx.fillStyle = grad;
                ctx.fillRect(cx - w/2, cy - h/2, w, h);

                // Metallic shine stripe
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.fillRect(cx - w/2 + 5, cy - h/2 + 3, w - 10, 6);

                // "Fe" label on the metal
                ctx.fillStyle = '#303030';
                ctx.font = 'bold 16px serif';
                ctx.fillText('Fe', cx, cy + 5);

                // Bolt/rivet decorations
                ctx.fillStyle = '#606060';
                ctx.beginPath();
                ctx.arc(cx - w/3, cy - h/4, 4, 0, Math.PI * 2);
                ctx.arc(cx + w/3, cy - h/4, 4, 0, Math.PI * 2);
                ctx.arc(cx - w/3, cy + h/4, 4, 0, Math.PI * 2);
                ctx.arc(cx + w/3, cy + h/4, 4, 0, Math.PI * 2);
                ctx.fill();

                // Border
                ctx.strokeStyle = '#404040';
                ctx.lineWidth = 3;
                ctx.strokeRect(cx - w/2, cy - h/2, w, h);
            }

            lightenColor(color, percent) {
                const num = parseInt(color.replace('#', ''), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) + amt;
                const G = (num >> 8 & 0x00FF) + amt;
                const B = (num & 0x0000FF) + amt;
                return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                    (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                    (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
            }
        }

        function addObject(type) {
            const x = 100 + Math.random() * (canvas.width - 200);
            objects.push(new FloatingObject(type, x));
            if (objects.length > 12) objects.shift();
        }

        function resetSimulation() {
            objects = [];
        }

        function drawBackground() {
            // Sky
            const skyGradient = ctx.createLinearGradient(0, 0, 0, waterLevel);
            skyGradient.addColorStop(0, '#87CEEB');
            skyGradient.addColorStop(1, '#E0F7FA');
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, canvas.width, waterLevel);

            // Water
            const waterGradient = ctx.createLinearGradient(0, waterLevel, 0, canvas.height);
            const hue = liquidDensity > 1.2 ? 200 : liquidDensity > 1.0 ? 210 : 190;
            waterGradient.addColorStop(0, `hsl(${hue}, 70%, 50%)`);
            waterGradient.addColorStop(1, `hsl(${hue}, 80%, 20%)`);
            ctx.fillStyle = waterGradient;
            ctx.fillRect(0, waterLevel, canvas.width, canvas.height - waterLevel);

            // Water surface waves
            ctx.strokeStyle = 'rgba(255,255,255,0.4)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let x = 0; x < canvas.width; x += 5) {
                const y = waterLevel + Math.sin(x / 30 + Date.now() / 500) * 3;
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Density label
            ctx.fillStyle = 'rgba(255,255,255,0.8)';
            ctx.font = 'bold 14px Segoe UI';
            ctx.textAlign = 'left';
            ctx.fillText(`Fl√ºssigkeit: œÅ = ${liquidDensity.toFixed(2)} g/cm¬≥`, 15, waterLevel + 25);

            // Water line marker
            ctx.strokeStyle = '#4fc3f7';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(0, waterLevel);
            ctx.lineTo(canvas.width, waterLevel);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBackground();

            objects.forEach(obj => {
                obj.update();
                obj.draw();
            });

            requestAnimationFrame(animate);
        }

        liquidDensitySlider.addEventListener('input', (e) => {
            liquidDensity = parseFloat(e.target.value);
            densityDisplay.textContent = `œÅ = ${liquidDensity.toFixed(2)} g/cm¬≥`;
        });

        // Start
        animate();
    </script>
</body>
</html>
