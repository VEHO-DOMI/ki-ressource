<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Politisches Spektrum - 19. Jahrhundert</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1a0a0a 0%, #3d1020 50%, #5c1030 100%);
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            height: 100vh;
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 12px;
            padding: 12px;
        }

        .canvas-wrapper {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 193, 7, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 12px;
            overflow-y: auto;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 193, 7, 0.3);
            border-radius: 10px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 193, 7, 0.5);
        }

        .panel {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 193, 7, 0.15);
            border-radius: 10px;
            padding: 12px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
        }

        .panel h3 {
            color: #ffc107;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .control-group input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
            accent-color: #ffc107;
        }

        .control-group label {
            cursor: pointer;
            flex: 1;
        }

        button {
            background: linear-gradient(135deg, #ffc107 0%, #ffb300 100%);
            color: #1a0a0a;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(255, 193, 7, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        .info-panel {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .info-title {
            color: #ffc107;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .info-description {
            font-size: 12px;
            line-height: 1.5;
            color: #e0e0e0;
            margin-bottom: 8px;
        }

        .info-figures {
            font-size: 11px;
            color: #b0b0b0;
            font-style: italic;
        }

        .info-figures-label {
            color: #ffc107;
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .empty-state {
            text-align: center;
            color: #888;
            font-size: 12px;
            padding: 20px 0;
        }

        .ideology-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 400px;
            overflow-y: auto;
        }

        .ideology-list::-webkit-scrollbar {
            width: 4px;
        }

        .ideology-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
        }

        .ideology-list::-webkit-scrollbar-thumb {
            background: rgba(255, 193, 7, 0.2);
            border-radius: 2px;
        }

        .ideology-item {
            padding: 8px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 3px solid;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .ideology-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(2px);
        }

        .ideology-item.selected {
            background: rgba(255, 193, 7, 0.15);
            border-left-color: #ffc107;
        }

        .title {
            color: #ffc107;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .subtitle {
            color: #b0b0b0;
            font-size: 11px;
            margin-bottom: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="canvas-wrapper">
            <canvas id="spectrumCanvas"></canvas>
        </div>

        <div class="sidebar">
            <div class="panel">
                <div class="title">Politisches Spektrum</div>
                <div class="subtitle">19. Jahrhundert</div>
            </div>

            <div class="panel">
                <h3>Einstellungen</h3>
                <div class="controls">
                    <div class="control-group">
                        <input type="checkbox" id="showPersonalities" checked>
                        <label for="showPersonalities">Persönlichkeiten</label>
                    </div>
                    <div class="control-group">
                        <input type="checkbox" id="showConnections" checked>
                        <label for="showConnections">Verbindungen</label>
                    </div>
                    <button id="resetBtn">Zurücksetzen</button>
                </div>
            </div>

            <div class="panel">
                <h3>Ideologien</h3>
                <div class="ideology-list" id="ideologyList"></div>
            </div>

            <div class="panel" id="infoPanel">
                <div class="empty-state">Klicken Sie auf eine Ideologie</div>
            </div>
        </div>
    </div>

    <script>
        // Ideology data
        const ideologies = [
            {
                id: 'liberalismus',
                name: 'Liberalismus',
                x: 30,
                y: 60,
                color: '#2196F3',
                description: 'Freiheit des Individuums, Marktwirtschaft, Verfassung und Menschenrechte.',
                figures: 'John Stuart Mill, Adam Smith'
            },
            {
                id: 'konservativismus',
                name: 'Konservativismus',
                x: 40,
                y: -20,
                color: '#9C27B0',
                description: 'Tradition, Monarchie, Kirche, Ordnung und organische Gesellschaft.',
                figures: 'Edmund Burke, Klemens von Metternich'
            },
            {
                id: 'sozialismus',
                name: 'Sozialismus',
                x: -70,
                y: 30,
                color: '#F44336',
                description: 'Gleichheit, Arbeitnehmerrechte, Vergesellschaftung und Gewerkschaften.',
                figures: 'Karl Marx, Friedrich Engels'
            },
            {
                id: 'nationalismus',
                name: 'Nationalismus',
                x: 20,
                y: -40,
                color: '#FF9800',
                description: 'Volksgemeinschaft, nationale Einheit und Selbstbestimmung.',
                figures: 'Giuseppe Mazzini, Johann Gottfried Herder'
            },
            {
                id: 'anarchismus',
                name: 'Anarchismus',
                x: -30,
                y: 90,
                color: '#4CAF50',
                description: 'Keine Staatsgewalt, Selbstverwaltung und direkte Aktion.',
                figures: 'Michail Bakunin, Pierre-Joseph Proudhon'
            },
            {
                id: 'marxismus',
                name: 'Marxismus',
                x: -90,
                y: -10,
                color: '#B71C1C',
                description: 'Klassenkampf, Revolution und Diktatur des Proletariats.',
                figures: 'Karl Marx, Friedrich Engels'
            }
        ];

        // Connections between ideologies
        const connections = [
            ['liberalismus', 'konservativismus'],
            ['sozialismus', 'marxismus'],
            ['anarchismus', 'sozialismus'],
            ['nationalismus', 'konservativismus'],
            ['liberalismus', 'anarchismus']
        ];

        // State
        let state = {
            selectedIdeology: null,
            showPersonalities: true,
            showConnections: true,
            hoveredIdeology: null,
            draggedIdeology: null,
            dragOffset: { x: 0, y: 0 },
            positions: {}
        };

        // Initialize positions
        ideologies.forEach(ideology => {
            state.positions[ideology.id] = { x: ideology.x, y: ideology.y };
        });

        const canvas = document.getElementById('spectrumCanvas');
        const ctx = canvas.getContext('2d');
        const infoPanel = document.getElementById('infoPanel');
        const ideologyList = document.getElementById('ideologyList');

        // Set canvas size
        function resizeCanvas() {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Get canvas coordinates from pixel position
        function getCanvasCoords(pixelX, pixelY) {
            const rect = canvas.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            const x = (pixelX - rect.left) * dpr;
            const y = (pixelY - rect.top) * dpr;
            return { x, y };
        }

        // Convert spectrum coordinates to canvas pixels
        function spectrumToCanvas(specX, specY) {
            const width = canvas.width / (window.devicePixelRatio || 1);
            const height = canvas.height / (window.devicePixelRatio || 1);
            const padding = 60;

            const canvasWidth = width - 2 * padding;
            const canvasHeight = height - 2 * padding;

            const x = padding + (specX + 100) / 200 * canvasWidth;
            const y = padding + (100 - specY) / 200 * canvasHeight;

            return { x, y };
        }

        // Convert canvas pixels to spectrum coordinates
        function canvasToSpectrum(canvasX, canvasY) {
            const width = canvas.width / (window.devicePixelRatio || 1);
            const height = canvas.height / (window.devicePixelRatio || 1);
            const padding = 60;

            const canvasWidth = width - 2 * padding;
            const canvasHeight = height - 2 * padding;

            const specX = ((canvasX - padding) / canvasWidth) * 200 - 100;
            const specY = 100 - ((canvasY - padding) / canvasHeight) * 200;

            return {
                x: Math.max(-100, Math.min(100, specX)),
                y: Math.max(-100, Math.min(100, specY))
            };
        }

        // Draw the canvas
        function draw() {
            const width = canvas.width / (window.devicePixelRatio || 1);
            const height = canvas.height / (window.devicePixelRatio || 1);
            const padding = 60;

            // Clear
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            ctx.fillRect(0, 0, width, height);

            // Draw axis background quadrants
            const centerX = padding + (width - 2 * padding) / 2;
            const centerY = padding + (height - 2 * padding) / 2;
            const quadWidth = (width - 2 * padding) / 2;
            const quadHeight = (height - 2 * padding) / 2;

            // Quadrant backgrounds
            ctx.fillStyle = 'rgba(244, 67, 54, 0.08)';
            ctx.fillRect(padding, padding, quadWidth, quadHeight);

            ctx.fillStyle = 'rgba(244, 67, 54, 0.08)';
            ctx.fillRect(centerX, padding, quadWidth, quadHeight);

            ctx.fillStyle = 'rgba(76, 175, 80, 0.08)';
            ctx.fillRect(padding, centerY, quadWidth, quadHeight);

            ctx.fillStyle = 'rgba(33, 150, 243, 0.08)';
            ctx.fillRect(centerX, centerY, quadWidth, quadHeight);

            // Draw axes
            ctx.strokeStyle = 'rgba(255, 193, 7, 0.3)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, padding);
            ctx.lineTo(centerX, height - padding);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(padding, centerY);
            ctx.lineTo(width - padding, centerY);
            ctx.stroke();

            // Draw axis labels
            ctx.fillStyle = '#ffc107';
            ctx.font = '11px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('Wirtschaftlich LINKS', padding + quadWidth / 2, padding - 35);
            ctx.fillText('Wirtschaftlich RECHTS', centerX + quadWidth / 2, padding - 35);

            ctx.textAlign = 'right';
            ctx.fillText('Autoritär', padding - 15, padding + 40);
            ctx.textAlign = 'right';
            ctx.fillText('Libertär', padding - 15, height - padding - 20);

            // Draw quadrant labels
            ctx.fillStyle = 'rgba(255, 193, 7, 0.4)';
            ctx.font = 'italic 10px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('Autoritär Links', padding + quadWidth / 2, centerY - 30);
            ctx.fillText('Autoritär Rechts', centerX + quadWidth / 2, centerY - 30);
            ctx.fillText('Libertär Links', padding + quadWidth / 2, height - padding + 20);
            ctx.fillText('Libertär Rechts', centerX + quadWidth / 2, height - padding + 20);

            // Draw connections
            if (state.showConnections) {
                ctx.strokeStyle = 'rgba(255, 193, 7, 0.2)';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);

                connections.forEach(([id1, id2]) => {
                    const pos1 = spectrumToCanvas(state.positions[id1].x, state.positions[id1].y);
                    const pos2 = spectrumToCanvas(state.positions[id2].x, state.positions[id2].y);
                    ctx.beginPath();
                    ctx.moveTo(pos1.x, pos1.y);
                    ctx.lineTo(pos2.x, pos2.y);
                    ctx.stroke();
                });

                ctx.setLineDash([]);
            }

            // Draw ideologies
            ideologies.forEach(ideology => {
                const pos = spectrumToCanvas(state.positions[ideology.id].x, state.positions[ideology.id].y);
                const isSelected = state.selectedIdeology === ideology.id;
                const isHovered = state.hoveredIdeology === ideology.id;
                let radius = 25;

                if (isHovered) radius = 32;
                if (isSelected) radius = 28;

                // Glow effect
                if (isSelected || isHovered) {
                    ctx.fillStyle = isSelected
                        ? 'rgba(255, 193, 7, 0.2)'
                        : 'rgba(255, 193, 7, 0.1)';
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, radius + 8, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Circle
                ctx.fillStyle = ideology.color;
                ctx.beginPath();
                ctx.arc(pos.x, pos.y, radius, 0, Math.PI * 2);
                ctx.fill();

                // Border
                ctx.strokeStyle = isSelected ? '#ffc107' : 'rgba(255, 255, 255, 0.3)';
                ctx.lineWidth = isSelected ? 3 : 2;
                ctx.beginPath();
                ctx.arc(pos.x, pos.y, radius, 0, Math.PI * 2);
                ctx.stroke();

                // Label
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 12px Inter';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(ideology.name.substring(0, 3).toUpperCase(), pos.x, pos.y - 5);

                // Figures
                if (state.showPersonalities) {
                    ctx.font = '9px Inter';
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                    const figureName = ideology.figures.split(',')[0].trim();
                    ctx.fillText(figureName.substring(0, 12), pos.x, pos.y + 8);
                }
            });

            // Tooltip
            if (state.hoveredIdeology && !state.draggedIdeology) {
                const ideology = ideologies.find(i => i.id === state.hoveredIdeology);
                if (ideology) {
                    const pos = spectrumToCanvas(state.positions[ideology.id].x, state.positions[ideology.id].y);
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
                    ctx.fillRect(pos.x - 60, pos.y + 40, 120, 30);
                    ctx.fillStyle = '#ffc107';
                    ctx.font = '10px Inter';
                    ctx.textAlign = 'center';
                    ctx.fillText(ideology.name, pos.x, pos.y + 50);
                    ctx.fillStyle = '#e0e0e0';
                    ctx.font = '9px Inter';
                    ctx.fillText('Klick zum Auswählen', pos.x, pos.y + 62);
                }
            }
        }

        // Animation loop
        function animate() {
            draw();
            requestAnimationFrame(animate);
        }

        animate();

        // Update info panel
        function updateInfoPanel(ideologyId) {
            const ideology = ideologies.find(i => i.id === ideologyId);
            if (!ideology) return;

            infoPanel.innerHTML = `
                <div class="info-title">${ideology.name}</div>
                <div class="info-description">${ideology.description}</div>
                <div class="info-figures-label">Vertreter:</div>
                <div class="info-figures">${ideology.figures}</div>
            `;
        }

        // Populate ideology list
        function populateList() {
            ideologyList.innerHTML = ideologies.map(ideology => `
                <div class="ideology-item ${state.selectedIdeology === ideology.id ? 'selected' : ''}"
                     data-id="${ideology.id}"
                     style="border-left-color: ${ideology.color}">
                    ${ideology.name}
                </div>
            `).join('');

            ideologyList.querySelectorAll('.ideology-item').forEach(item => {
                item.addEventListener('click', () => {
                    state.selectedIdeology = item.dataset.id;
                    updateInfoPanel(state.selectedIdeology);
                    populateList();
                    draw();
                });
            });
        }

        populateList();

        // Event listeners
        canvas.addEventListener('mousemove', (e) => {
            const coords = getCanvasCoords(e.clientX, e.clientY);
            const dpr = window.devicePixelRatio || 1;

            if (state.draggedIdeology) {
                const specCoords = canvasToSpectrum(coords.x / dpr, coords.y / dpr);
                state.positions[state.draggedIdeology] = { x: specCoords.x, y: specCoords.y };
            } else {
                // Check hover
                state.hoveredIdeology = null;
                ideologies.forEach(ideology => {
                    const pos = spectrumToCanvas(state.positions[ideology.id].x, state.positions[ideology.id].y);
                    const dist = Math.sqrt(
                        Math.pow(coords.x / dpr - pos.x, 2) + Math.pow(coords.y / dpr - pos.y, 2)
                    );
                    if (dist < 35) {
                        state.hoveredIdeology = ideology.id;
                    }
                });
                canvas.style.cursor = state.hoveredIdeology ? 'pointer' : 'default';
            }
        });

        canvas.addEventListener('mousedown', (e) => {
            if (state.hoveredIdeology) {
                state.draggedIdeology = state.hoveredIdeology;
                canvas.style.cursor = 'grabbing';
            }
        });

        canvas.addEventListener('mouseup', () => {
            state.draggedIdeology = null;
            canvas.style.cursor = 'default';
        });

        canvas.addEventListener('mouseleave', () => {
            state.hoveredIdeology = null;
            state.draggedIdeology = null;
            canvas.style.cursor = 'default';
        });

        canvas.addEventListener('click', (e) => {
            if (state.hoveredIdeology) {
                state.selectedIdeology = state.hoveredIdeology;
                updateInfoPanel(state.selectedIdeology);
                populateList();
            }
        });

        document.getElementById('showPersonalities').addEventListener('change', (e) => {
            state.showPersonalities = e.target.checked;
        });

        document.getElementById('showConnections').addEventListener('change', (e) => {
            state.showConnections = e.target.checked;
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            ideologies.forEach(ideology => {
                state.positions[ideology.id] = { x: ideology.x, y: ideology.y };
            });
        });

        // Initialize
        setTimeout(() => {
            resizeCanvas();
        }, 50);
    </script>
</body>
</html>
